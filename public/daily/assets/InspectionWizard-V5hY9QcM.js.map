{"version":3,"file":"InspectionWizard-V5hY9QcM.js","sources":["../../node_modules/lucide-react/dist/esm/icons/camera.js","../../node_modules/lucide-react/dist/esm/icons/check-check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/gauge.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/wrench.js","../../src/components/InspectionCard.tsx","../../src/hooks/useDeviceDetection.ts","../../src/hooks/useLocalStorage.ts","../../src/components/InspectionWizard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z\",\n      key: \"18u6gg\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"13\", r: \"3\", key: \"1vg3eu\" }]\n];\nconst Camera = createLucideIcon(\"camera\", __iconNode);\n\nexport { __iconNode, Camera as default };\n//# sourceMappingURL=camera.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 7 17l-5-5\", key: \"116fxf\" }],\n  [\"path\", { d: \"m22 10-7.5 7.5L13 16\", key: \"ke71qq\" }]\n];\nconst CheckCheck = createLucideIcon(\"check-check\", __iconNode);\n\nexport { __iconNode, CheckCheck as default };\n//# sourceMappingURL=check-check.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]];\nconst ChevronLeft = createLucideIcon(\"chevron-left\", __iconNode);\n\nexport { __iconNode, ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 14 4-4\", key: \"9kzdfg\" }],\n  [\"path\", { d: \"M3.34 19a10 10 0 1 1 17.32 0\", key: \"19p75a\" }]\n];\nconst Gauge = createLucideIcon(\"gauge\", __iconNode);\n\nexport { __iconNode, Gauge as default };\n//# sourceMappingURL=gauge.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n];\nconst Shield = createLucideIcon(\"shield\", __iconNode);\n\nexport { __iconNode, Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z\",\n      key: \"1ngwbx\"\n    }\n  ]\n];\nconst Wrench = createLucideIcon(\"wrench\", __iconNode);\n\nexport { __iconNode, Wrench as default };\n//# sourceMappingURL=wrench.js.map\n","import React, { useState } from 'react';\r\nimport { Check, X, AlertTriangle, WrenchIcon, Camera, Upload } from 'lucide-react';\r\nimport { cn } from '../lib/utils';\r\nimport { Modal } from './ui/Modal';\r\nimport { Button } from './ui/Button';\r\nimport type { ItemStatus, CompartmentItem } from '../types';\r\nimport { WORKER_URL } from '../lib/config';\r\n\r\ninterface InspectionCardProps {\r\n  item: string | CompartmentItem;\r\n  compartmentId: string;\r\n  status: ItemStatus;\r\n  hasExistingDefect: boolean;\r\n  onStatusChange: (status: ItemStatus, notes?: string, photoUrl?: string, fixedStatus?: 'fixed' | 'still_damaged', radioNumber?: string) => void;\r\n}\r\n\r\nexport const InspectionCard: React.FC<InspectionCardProps> = ({\r\n  item,\r\n  status,\r\n  hasExistingDefect,\r\n  onStatusChange,\r\n  compartmentId,\r\n}) => {\r\n  const [showNotesModal, setShowNotesModal] = useState(false);\r\n  const [modalType, setModalType] = useState<'missing' | 'damaged'>('missing');\r\n  const [notes, setNotes] = useState('');\r\n  const [showDefectStatusModal, setShowDefectStatusModal] = useState(false);\r\n  const [radioNumber, setRadioNumber] = useState('');\r\n  \r\n  // Photo upload state\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadError, setUploadError] = useState<string | null>(null);\r\n  const [uploadedPhotoUrl, setUploadedPhotoUrl] = useState<string | null>(null);\r\n\r\n  // Extract item data\r\n  const itemName = typeof item === 'string' ? item : item.name;\r\n  const expectedQuantity = typeof item === 'object' ? item.expectedQuantity : undefined;\r\n  const itemNote = typeof item === 'object' ? item.note : undefined;\r\n  const inputType = typeof item === 'object' ? item.inputType : 'checkbox';\r\n\r\n  // Check if this is a radio item that needs special handling\r\n  const isRadioItem = inputType === 'radio' || (typeof item === 'object' && item.name.toLowerCase().includes('radio'));\r\n\r\n  const handleStatusClick = (newStatus: ItemStatus) => {\r\n    if (newStatus === 'present') {\r\n      // If there's an existing defect, show the fixed/still damaged modal\r\n      if (hasExistingDefect) {\r\n        setShowDefectStatusModal(true);\r\n      } else {\r\n        onStatusChange('present', undefined, undefined, undefined, radioNumber);\r\n        setNotes('');\r\n      }\r\n    } else {\r\n      setModalType(newStatus);\r\n      setShowNotesModal(true);\r\n    }\r\n  };\r\n\r\n  const handleDefectStatusChoice = (choice: 'fixed' | 'still_damaged' | 'no_change') => {\r\n    if (choice === 'fixed') {\r\n      onStatusChange('present', 'Item has been fixed and is now back in service', undefined, 'fixed');\r\n    } else if (choice === 'still_damaged') {\r\n      onStatusChange('damaged', 'Issue still present - previously reported', undefined, 'still_damaged');\r\n    } else {\r\n      // no_change - just mark as present without additional notification\r\n      onStatusChange('present');\r\n    }\r\n    setShowDefectStatusModal(false);\r\n  };\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    const validTypes = ['image/jpeg', 'image/png', 'image/webp', 'image/gif'];\r\n    if (!validTypes.includes(file.type)) {\r\n      setUploadError('Please select a valid image file (JPG, PNG, WEBP, or GIF)');\r\n      return;\r\n    }\r\n\r\n    // Validate file size (10MB max)\r\n    const maxSize = 10 * 1024 * 1024;\r\n    if (file.size > maxSize) {\r\n      setUploadError('File size must be less than 10MB');\r\n      return;\r\n    }\r\n\r\n    setSelectedFile(file);\r\n    setUploadError(null);\r\n\r\n    // Create preview URL\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setPreviewUrl(e.target?.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleRemovePhoto = () => {\r\n    setSelectedFile(null);\r\n    setPreviewUrl(null);\r\n    setUploadedPhotoUrl(null);\r\n    setUploadError(null);\r\n  };\r\n\r\n  const uploadPhoto = async (): Promise<string | null> => {\r\n    if (!selectedFile) return null;\r\n\r\n    setIsUploading(true);\r\n    setUploadError(null);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n      formData.append('inspector', 'Inspector'); // Will be filled from actual user context\r\n      formData.append('apparatus', compartmentId.split('-')[0] || 'Unknown');\r\n      formData.append('item', itemName);\r\n      formData.append('reportedAt', new Date().toISOString());\r\n\r\n      const response = await fetch(`${WORKER_URL}/api/uploads`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Upload failed');\r\n      }\r\n\r\n      const result = await response.json();\r\n      setUploadedPhotoUrl(result.photoUrl);\r\n      return result.photoUrl;\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to upload image';\r\n      setUploadError(errorMessage);\r\n      return null;\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmitNotes = async () => {\r\n    if (!notes.trim()) {\r\n      alert('Please enter notes describing the issue');\r\n      return;\r\n    }\r\n\r\n    // Upload photo if one is selected\r\n    let photoUrl = uploadedPhotoUrl;\r\n    if (selectedFile && !uploadedPhotoUrl) {\r\n      photoUrl = await uploadPhoto();\r\n      if (!photoUrl && uploadError) {\r\n        // Photo upload failed but allow submission\r\n        const proceed = confirm(\r\n          `Photo upload failed: ${uploadError}\\n\\nDo you want to submit without the photo?`\r\n        );\r\n        if (!proceed) return;\r\n      }\r\n    }\r\n\r\n    onStatusChange(modalType, notes, photoUrl || undefined, undefined, radioNumber);\r\n    setShowNotesModal(false);\r\n    setNotes('');\r\n    handleRemovePhoto();\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setShowNotesModal(false);\r\n    setNotes('');\r\n    handleRemovePhoto();\r\n  };\r\n\r\n  // Special rendering for radio items with text input\r\n  if (isRadioItem) {\r\n    return (\r\n      <>\r\n        <div\r\n          className={cn(\r\n            'p-4 rounded-2xl transition-all duration-200 border-2 shadow-sm space-y-3',\r\n            {\r\n              'bg-white border-gray-200 hover:border-gray-300': status === 'present' && !hasExistingDefect,\r\n              'bg-green-50 border-green-500 shadow-green-100': status === 'present' && !hasExistingDefect,\r\n              'bg-red-50 border-red-500 shadow-red-100': status === 'missing',\r\n              'bg-yellow-50 border-yellow-500 shadow-yellow-100': status === 'damaged',\r\n              'bg-orange-50 border-orange-500 shadow-orange-100': hasExistingDefect,\r\n            }\r\n          )}\r\n        >\r\n          {/* Item Name and Status Buttons Row */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex-1 min-w-0 pr-3\">\r\n              <p className=\"font-semibold text-gray-900 text-base leading-tight\">\r\n                {itemName}\r\n              </p>\r\n              {itemNote && (\r\n                <p className=\"text-xs text-gray-500 mt-1\">{itemNote}</p>\r\n              )}\r\n              {hasExistingDefect && (\r\n                <span className=\"inline-block mt-2 px-3  py-1 bg-orange-600 text-white text-xs font-bold rounded-full shadow-sm\">\r\n                  ‚ö†Ô∏è Previously Reported\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Status Buttons */}\r\n            <div className=\"flex gap-2 flex-shrink-0\">\r\n              <button\r\n                onClick={() => handleStatusClick('present')}\r\n                className={cn(\r\n                  'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n                  status === 'present'\r\n                    ? 'bg-green-500 text-white shadow-lg scale-105 shadow-green-200'\r\n                    : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n                )}\r\n                title=\"Present/Working\"\r\n              >\r\n                <Check className=\"w-7 h-7 stroke-[3]\" />\r\n              </button>\r\n\r\n              <button\r\n                onClick={() => handleStatusClick('missing')}\r\n                className={cn(\r\n                  'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n                  status === 'missing'\r\n                    ? 'bg-red-500 text-white shadow-lg scale-105 shadow-red-200'\r\n                    : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n                )}\r\n                title=\"Missing\"\r\n              >\r\n                <X className=\"w-7 h-7 stroke-[3]\" />\r\n              </button>\r\n\r\n              <button\r\n                onClick={() => handleStatusClick('damaged')}\r\n                className={cn(\r\n                  'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n                  status === 'damaged'\r\n                    ? 'bg-yellow-500 text-white shadow-lg scale-105 shadow-yellow-200'\r\n                    : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n                )}\r\n                title=\"Damaged\"\r\n              >\r\n                <AlertTriangle className=\"w-7 h-7 stroke-[3]\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Radio Number Input */}\r\n          <div>\r\n            <label className=\"block text-xs font-semibold text-gray-600 mb-1\">\r\n              Radio Number (Optional):\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={radioNumber}\r\n              onChange={(e) => setRadioNumber(e.target.value)}\r\n              placeholder=\"Enter radio #\"\r\n              className=\"w-full px-3 py-2 text-sm rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900 font-medium\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Include the modals for radio items too */}\r\n        <Modal\r\n          isOpen={showDefectStatusModal}\r\n          onClose={() => setShowDefectStatusModal(false)}\r\n          title={`Previously Reported Issue: \"${itemName}\"`}\r\n        >\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-orange-50 border-2 border-orange-300 rounded-xl p-4\">\r\n              <p className=\"text-sm text-orange-900 font-semibold mb-2\">\r\n                ‚ö†Ô∏è This item was previously reported as defective.\r\n              </p>\r\n              <p className=\"text-xs text-orange-800\">\r\n                Please select the current status of this item:\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              <Button\r\n                onClick={() => handleDefectStatusChoice('fixed')}\r\n                className=\"w-full h-14 text-base font-bold rounded-xl bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 flex items-center justify-center gap-2\"\r\n              >\r\n                <WrenchIcon className=\"w-5 h-5\" />\r\n                Fixed / Back in Service\r\n              </Button>\r\n\r\n              <Button\r\n                onClick={() => handleDefectStatusChoice('still_damaged')}\r\n                variant=\"secondary\"\r\n                className=\"w-full h-14 text-base font-bold rounded-xl bg-yellow-100 hover:bg-yellow-200 text-yellow-900 flex items-center justify-center gap-2\"\r\n              >\r\n                <AlertTriangle className=\"w-5 h-5\" />\r\n                Still Damaged / Missing\r\n              </Button>\r\n\r\n              <Button\r\n                onClick={() => handleDefectStatusChoice('no_change')}\r\n                variant=\"secondary\"\r\n                className=\"w-full h-12 text-sm font-bold rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700\"\r\n              >\r\n                Skip - No Change\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n\r\n        <Modal\r\n          isOpen={showNotesModal}\r\n          onClose={handleCancel}\r\n          title={`Item ${modalType === 'missing' ? 'Missing' : 'Damaged'}: \"${itemName}\"`}\r\n        >\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100\">\r\n              {modalType === 'missing' ? (\r\n                <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0\">\r\n                  <X className=\"w-6 h-6 text-red-600\" />\r\n                </div>\r\n              ) : (\r\n                <div className=\"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0\">\r\n                  <AlertTriangle className=\"w-6 h-6 text-yellow-600\" />\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"text-sm font-semibold text-gray-600\">\r\n                  {modalType === 'missing' ? 'Missing Equipment' : 'Damaged Equipment'}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500\">Please provide detailed information</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n                Description *\r\n              </label>\r\n              <textarea\r\n                value={notes}\r\n                onChange={(e) => setNotes(e.target.value)}\r\n                placeholder=\"Describe the issue in detail...\"\r\n                rows={4}\r\n                className=\"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-500 outline-none transition-all resize-none text-base\"\r\n                autoFocus\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                Provide as much detail as possible to help with resolution\r\n              </p>\r\n            </div>\r\n\r\n            {isRadioItem && (\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n                  Radio Number (if known)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={radioNumber}\r\n                  onChange={(e) => setRadioNumber(e.target.value)}\r\n                  placeholder=\"Enter radio # if known\"\r\n                  className=\"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Photo Upload Section */}\r\n            <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-4\">\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n                üì∏ Photo (Optional)\r\n              </label>\r\n              \r\n              {previewUrl ? (\r\n                <div className=\"space-y-3\">\r\n                  <img\r\n                    src={previewUrl}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-48 object-cover rounded-lg\"\r\n                  />\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      onClick={handleRemovePhoto}\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1\"\r\n                    >\r\n                      Remove Photo\r\n                    </Button>\r\n                    {!uploadedPhotoUrl && (\r\n                      <Button\r\n                        onClick={uploadPhoto}\r\n                        disabled={isUploading}\r\n                        size=\"sm\"\r\n                        className=\"flex-1 flex items-center justify-center gap-2\"\r\n                      >\r\n                        {isUploading ? (\r\n                          <>\r\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\" />\r\n                            Uploading...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Upload className=\"w-4 h-4\" />\r\n                            Upload Now\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    )}\r\n                    {uploadedPhotoUrl && (\r\n                      <span className=\"flex-1 text-sm text-green-600 font-semibold flex items-center justify-center gap-1\">\r\n                        ‚úì Uploaded\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  {uploadError && (\r\n                    <p className=\"text-xs text-red-600\">{uploadError}</p>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    capture=\"environment\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"hidden\"\r\n                    id=\"photo-upload-radio\"\r\n                  />\r\n                  <label\r\n                    htmlFor=\"photo-upload-radio\"\r\n                    className=\"flex flex-col items-center justify-center py-6 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Camera className=\"w-12 h-12 text-gray-400 mb-2\" />\r\n                    <p className=\"text-sm font-semibold text-gray-700\">Take Photo or Upload</p>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">JPG, PNG, WEBP, or GIF (max 10MB)</p>\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex gap-3 pt-2\">\r\n              <Button\r\n                onClick={handleSubmitNotes}\r\n                className=\"flex-1 h-12 text-base font-bold rounded-xl\"\r\n                disabled={isUploading}\r\n              >\r\n                Submit Report\r\n              </Button>\r\n              <Button\r\n                onClick={handleCancel}\r\n                variant=\"secondary\"\r\n                className=\"flex-1 h-12 text-base font-bold rounded-xl\"\r\n                disabled={isUploading}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={cn(\r\n          'flex items-center justify-between p-4 rounded-2xl transition-all duration-200 border-2 shadow-sm',\r\n          {\r\n            'bg-white border-gray-200 hover:border-gray-300': status === 'present' && !hasExistingDefect,\r\n            'bg-green-50 border-green-500 shadow-green-100': status === 'present' && !hasExistingDefect,\r\n            'bg-red-50 border-red-500 shadow-red-100': status === 'missing',\r\n            'bg-yellow-50 border-yellow-500 shadow-yellow-100': status === 'damaged',\r\n            'bg-orange-50 border-orange-500 shadow-orange-100': hasExistingDefect,\r\n          }\r\n        )}\r\n      >\r\n        {/* Item Name */}\r\n        <div className=\"flex-1 min-w-0 pr-3\">\r\n          <p className=\"font-semibold text-gray-900 text-base leading-tight\">\r\n            {itemName}\r\n            {expectedQuantity && (\r\n              <span className=\"text-sm text-gray-600 ml-1\">({expectedQuantity})</span>\r\n            )}\r\n          </p>\r\n          {itemNote && (\r\n            <p className=\"text-xs text-gray-500 mt-1\">{itemNote}</p>\r\n          )}\r\n          {hasExistingDefect && (\r\n            <span className=\"inline-block mt-2 px-3 py-1 bg-orange-600 text-white text-xs font-bold rounded-full shadow-sm\">\r\n              ‚ö†Ô∏è Previously Reported\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Status Buttons */}\r\n        <div className=\"flex gap-2 flex-shrink-0\">\r\n          {/* Present Button */}\r\n          <button\r\n            onClick={() => handleStatusClick('present')}\r\n            className={cn(\r\n              'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n              status === 'present'\r\n                ? 'bg-green-500 text-white shadow-lg scale-105 shadow-green-200'\r\n                : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n            )}\r\n            title=\"Present/Working\"\r\n          >\r\n            <Check className=\"w-7 h-7 stroke-[3]\" />\r\n          </button>\r\n\r\n          {/* Missing Button */}\r\n          <button\r\n            onClick={() => handleStatusClick('missing')}\r\n            className={cn(\r\n              'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n              status === 'missing'\r\n                ? 'bg-red-500 text-white shadow-lg scale-105 shadow-red-200'\r\n                : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n            )}\r\n            title=\"Missing\"\r\n          >\r\n            <X className=\"w-7 h-7 stroke-[3]\" />\r\n          </button>\r\n\r\n          {/* Damaged Button */}\r\n          <button\r\n            onClick={() => handleStatusClick('damaged')}\r\n            className={cn(\r\n              'flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95',\r\n              status === 'damaged'\r\n                ? 'bg-yellow-500 text-white shadow-lg scale-105 shadow-yellow-200'\r\n                : 'bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300'\r\n            )}\r\n            title=\"Damaged\"\r\n          >\r\n            <AlertTriangle className=\"w-7 h-7 stroke-[3]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Defect Status Modal (for previously reported items) */}\r\n      <Modal\r\n        isOpen={showDefectStatusModal}\r\n        onClose={() => setShowDefectStatusModal(false)}\r\n        title={`Previously Reported Issue: \"${itemName}\"`}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div className=\"bg-orange-50 border-2 border-orange-300 rounded-xl p-4\">\r\n            <p className=\"text-sm text-orange-900 font-semibold mb-2\">\r\n              ‚ö†Ô∏è This item was previously reported as defective.\r\n            </p>\r\n            <p className=\"text-xs text-orange-800\">\r\n              Please select the current status of this item:\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            <Button\r\n              onClick={() => handleDefectStatusChoice('fixed')}\r\n              className=\"w-full h-14 text-base font-bold rounded-xl bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 flex items-center justify-center gap-2\"\r\n            >\r\n              <WrenchIcon className=\"w-5 h-5\" />\r\n              Fixed / Back in Service\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={() => handleDefectStatusChoice('still_damaged')}\r\n              variant=\"secondary\"\r\n              className=\"w-full h-14 text-base font-bold rounded-xl bg-yellow-100 hover:bg-yellow-200 text-yellow-900 flex items-center justify-center gap-2\"\r\n            >\r\n              <AlertTriangle className=\"w-5 h-5\" />\r\n              Still Damaged / Missing\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={() => handleDefectStatusChoice('no_change')}\r\n              variant=\"secondary\"\r\n              className=\"w-full h-12 text-sm font-bold rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700\"\r\n            >\r\n              Skip - No Change\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Notes Modal */}\r\n      <Modal\r\n        isOpen={showNotesModal}\r\n        onClose={handleCancel}\r\n        title={`Item ${modalType === 'missing' ? 'Missing' : 'Damaged'}: \"${itemName}\"`}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {/* Issue Type Badge */}\r\n          <div className=\"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100\">\r\n            {modalType === 'missing' ? (\r\n              <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0\">\r\n                <X className=\"w-6 h-6 text-red-600\" />\r\n              </div>\r\n            ) : (\r\n              <div className=\"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0\">\r\n                <AlertTriangle className=\"w-6 h-6 text-yellow-600\" />\r\n              </div>\r\n            )}\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-gray-600\">\r\n                {modalType === 'missing' ? 'Missing Equipment' : 'Damaged Equipment'}\r\n              </p>\r\n              <p className=\"text-xs text-gray-500\">Please provide detailed information</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n              Description *\r\n            </label>\r\n            <textarea\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              placeholder=\"Describe the issue in detail...\"\r\n              rows={4}\r\n              className=\"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-500 outline-none transition-all resize-none text-base\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              Provide as much detail as possible to help with resolution\r\n            </p>\r\n          </div>\r\n\r\n          {/* Photo Upload Section */}\r\n          <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-4\">\r\n            <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n              üì∏ Photo (Optional)\r\n            </label>\r\n            \r\n            {previewUrl ? (\r\n              <div className=\"space-y-3\">\r\n                <img\r\n                  src={previewUrl}\r\n                  alt=\"Preview\"\r\n                  className=\"w-full h-48 object-cover rounded-lg\"\r\n                />\r\n                <div className=\"flex gap-2\">\r\n                  <Button\r\n                    onClick={handleRemovePhoto}\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1\"\r\n                  >\r\n                    Remove Photo\r\n                  </Button>\r\n                  {!uploadedPhotoUrl && (\r\n                    <Button\r\n                      onClick={uploadPhoto}\r\n                      disabled={isUploading}\r\n                      size=\"sm\"\r\n                      className=\"flex-1 flex items-center justify-center gap-2\"\r\n                    >\r\n                      {isUploading ? (\r\n                        <>\r\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\" />\r\n                          Uploading...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Upload className=\"w-4 h-4\" />\r\n                          Upload Now\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                  {uploadedPhotoUrl && (\r\n                    <span className=\"flex-1 text-sm text-green-600 font-semibold flex items-center justify-center gap-1\">\r\n                      ‚úì Uploaded\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                {uploadError && (\r\n                  <p className=\"text-xs text-red-600\">{uploadError}</p>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  capture=\"environment\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                  id=\"photo-upload\"\r\n                />\r\n                <label\r\n                  htmlFor=\"photo-upload\"\r\n                  className=\"flex flex-col items-center justify-center py-6 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors\"\r\n                >\r\n                  <Camera className=\"w-12 h-12 text-gray-400 mb-2\" />\r\n                  <p className=\"text-sm font-semibold text-gray-700\">Take Photo or Upload</p>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">JPG, PNG, WEBP, or GIF (max 10MB)</p>\r\n                </label>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <Button\r\n              onClick={handleSubmitNotes}\r\n              className=\"flex-1 h-12 text-base font-bold rounded-xl\"\r\n              disabled={isUploading}\r\n            >\r\n              Submit Report\r\n            </Button>\r\n            <Button\r\n              onClick={handleCancel}\r\n              variant=\"secondary\"\r\n              className=\"flex-1 h-12 text-base font-bold rounded-xl\"\r\n              disabled={isUploading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n};","import { useState, useEffect } from 'react';\r\n\r\nexport interface DeviceInfo {\r\n  isMobile: boolean;\r\n  isTablet: boolean;\r\n  isDesktop: boolean;\r\n  screenWidth: number;\r\n  screenHeight: number;\r\n  orientation: 'portrait' | 'landscape';\r\n}\r\n\r\nexport const useDeviceDetection = (): DeviceInfo => {\r\n  const [deviceInfo, setDeviceInfo] = useState<DeviceInfo>(() => {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n    \r\n    return {\r\n      isMobile: width < 768,\r\n      isTablet: width >= 768 && width < 1024,\r\n      isDesktop: width >= 1024,\r\n      screenWidth: width,\r\n      screenHeight: height,\r\n      orientation: width > height ? 'landscape' : 'portrait',\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const width = window.innerWidth;\r\n      const height = window.innerHeight;\r\n      \r\n      setDeviceInfo({\r\n        isMobile: width < 768,\r\n        isTablet: width >= 768 && width < 1024,\r\n        isDesktop: width >= 1024,\r\n        screenWidth: width,\r\n        screenHeight: height,\r\n        orientation: width > height ? 'landscape' : 'portrait',\r\n      });\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return deviceInfo;\r\n};","import { useState, useEffect } from 'react';\r\n\r\nexport function useLocalStorage<T>(key: string, initialValue: T): [T, (value: T | ((val: T) => T)) => void] {\r\n  // Get from local storage then parse stored json or return initialValue\r\n  const readValue = (): T => {\r\n    if (typeof window === 'undefined') {\r\n      return initialValue;\r\n    }\r\n\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      console.warn(`Error reading localStorage key \"${key}\":`, error);\r\n      return initialValue;\r\n    }\r\n  };\r\n\r\n  const [storedValue, setStoredValue] = useState<T>(readValue);\r\n\r\n  // Return a wrapped version of useState's setter function that persists the new value to localStorage.\r\n  const setValue = (value: T | ((val: T) => T)) => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n      \r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      \r\n      // Save to local storage\r\n      if (typeof window !== 'undefined') {\r\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n      }\r\n    } catch (error) {\r\n      console.warn(`Error setting localStorage key \"${key}\":`, error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setStoredValue(readValue());\r\n  }, []);\r\n\r\n  return [storedValue, setValue];\r\n}\r\n\r\n// Hook for remembering text field values with autocomplete suggestions\r\nexport function useFieldHistory(fieldKey: string, maxHistory: number = 10) {\r\n  const [history, setHistory] = useLocalStorage<string[]>(`field_history_${fieldKey}`, []);\r\n\r\n  const addToHistory = (value: string) => {\r\n    if (!value || !value.trim()) return;\r\n    \r\n    setHistory((prev) => {\r\n      const filtered = prev.filter((item) => item !== value);\r\n      const newHistory = [value, ...filtered].slice(0, maxHistory);\r\n      return newHistory;\r\n    });\r\n  };\r\n\r\n  const clearHistory = () => {\r\n    setHistory([]);\r\n  };\r\n\r\n  return { history, addToHistory, clearHistory };\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ChevronLeft, ChevronRight, CheckCircle, Calendar, Shield, Gauge, CheckCheck } from 'lucide-react';\r\nimport { Button } from './ui/Button';\r\nimport { Card, CardHeader, CardContent } from './ui/Card';\r\nimport { Modal } from './ui/Modal';\r\nimport { InspectionCard } from './InspectionCard';\r\nimport { githubService } from '../lib/github';\r\nimport { createTasks, submitVehicleChangeRequest } from '../lib/inventory';\r\nimport { useDeviceDetection } from '../hooks/useDeviceDetection';\r\nimport { useLocalStorage, useFieldHistory } from '../hooks/useLocalStorage';\r\nimport { useApparatusStatus } from '../hooks/useApparatusStatus';\r\nimport { FORMS_MANAGEMENT_ENABLED, WORKER_URL } from '../lib/config';\r\nimport type { User, ChecklistData, ChecklistItem, GitHubIssue, ItemStatus, OfficerChecklistItem } from '../types';\r\n\r\nexport const InspectionWizard: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const device = useDeviceDetection();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [checklist, setChecklist] = useState<ChecklistData | null>(null);\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [items, setItems] = useState<Map<string, ChecklistItem>>(new Map());\r\n  const [existingDefects, setExistingDefects] = useState<Map<string, GitHubIssue>>(new Map());\r\n  const [officerItems, setOfficerItems] = useState<OfficerChecklistItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [submissionDefectCount, setSubmissionDefectCount] = useState(0);\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [isSendingEmail, setIsSendingEmail] = useState(false);\r\n\r\n  // Apparatus Status Integration\r\n  const { statuses, getVehicleNumber } = useApparatusStatus();\r\n  const [detectedVehicleChange, setDetectedVehicleChange] = useState(false);\r\n  const [expectedVehicleNo, setExpectedVehicleNo] = useState<string | undefined>();\r\n\r\n  // LocalStorage for remembering last entries\r\n  const [lastOfficerValues, setLastOfficerValues] = useLocalStorage<Record<string, string | number>>('mbfd_last_officer_values', {});\r\n\r\n  useEffect(() => {\r\n    // Load user data from session storage\r\n    const userData = sessionStorage.getItem('user');\r\n    if (!userData) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n\r\n    const parsedUser: User = JSON.parse(userData);\r\n    setUser(parsedUser);\r\n\r\n    // Load checklist data\r\n    loadChecklistData(parsedUser);\r\n  }, [navigate]);\r\n\r\n  // Auto-populate vehicle number from apparatus status\r\n  useEffect(() => {\r\n    if (user && statuses.length > 0) {\r\n      const vehicleNo = getVehicleNumber(user.apparatus);\r\n      if (vehicleNo) {\r\n        setExpectedVehicleNo(vehicleNo);\r\n        \r\n        // Check if user's unitNumber differs from expected\r\n        if (user.unitNumber && user.unitNumber !== vehicleNo) {\r\n          setDetectedVehicleChange(true);\r\n        }\r\n      }\r\n    }\r\n  }, [user, statuses, getVehicleNumber]);\r\n\r\n  const loadChecklistData = async (userData: User) => {\r\n    try {\r\n      let data: ChecklistData | null = null;\r\n      \r\n      // Try loading from dynamic forms API if feature is enabled\r\n      if (FORMS_MANAGEMENT_ENABLED) {\r\n        try {\r\n          const res = await fetch(`${WORKER_URL}/api/forms/apparatus/${encodeURIComponent(userData.apparatus)}`);\r\n          if (res.ok) {\r\n            data = await res.json();\r\n            console.log('Loaded checklist from dynamic forms API');\r\n          } else {\r\n            console.warn('Dynamic forms API failed, falling back to static files');\r\n          }\r\n        } catch (error) {\r\n          console.error('Dynamic form load failed, using static fallback:', error);\r\n        }\r\n      }\r\n      \r\n      // Fallback to static files if dynamic loading failed or is disabled\r\n      if (!data) {\r\n        // Determine which checklist to load based on apparatus type\r\n        let checklistFile: string;\r\n        \r\n        if (userData.apparatus.startsWith('Engine')) {\r\n          checklistFile = 'engine_checklist.json';\r\n        } else if (userData.apparatus === 'Ladder 1') {\r\n          checklistFile = 'ladder1_checklist.json';\r\n        } else if (userData.apparatus === 'Ladder 3') {\r\n          checklistFile = 'ladder3_checklist.json';\r\n        } else if (userData.apparatus === 'Rope Inventory') {\r\n          checklistFile = 'rope_checklist.json';\r\n        } else {\r\n          // All Rescue units use the same checklist\r\n          checklistFile = 'rescue_checklist.json';\r\n        }\r\n        \r\n        // Load checklist JSON\r\n        const response = await fetch(`/mbfd-checkout-system/data/${checklistFile}`);\r\n        data = await response.json();\r\n        console.log('Loaded checklist from static file:', checklistFile);\r\n      }\r\n      \r\n      // If still no data, throw error\r\n      if (!data) {\r\n        throw new Error('Failed to load checklist data');\r\n      }\r\n      \r\n      setChecklist(data);\r\n\r\n      // Initialize all items with 'present' status\r\n      const itemsMap = new Map<string, ChecklistItem>();\r\n      data.compartments.forEach(compartment => {\r\n        compartment.items.forEach(item => {\r\n          // Handle both string and object format\r\n          const itemName = typeof item === 'string' ? item : item.name;\r\n          const itemId = `${compartment.id}:${itemName}`;\r\n          itemsMap.set(itemId, {\r\n            name: itemName,\r\n            status: 'present',\r\n            inputType: typeof item === 'object' ? item.inputType : 'checkbox',\r\n            expectedQuantity: typeof item === 'object' ? item.expectedQuantity : undefined,\r\n          });\r\n        });\r\n      });\r\n      setItems(itemsMap);\r\n\r\n      // Initialize officer checklist with last saved values\r\n      if (data.officerChecklist) {\r\n        setOfficerItems(data.officerChecklist.map(item => ({\r\n          ...item,\r\n          checked: false,\r\n          value: lastOfficerValues[item.id] || ''\r\n        })));\r\n      }\r\n\r\n      // Fetch existing defects for this apparatus\r\n      const defects = await githubService.checkExistingDefects(userData.apparatus);\r\n      setExistingDefects(defects);\r\n\r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      alert('Error loading inspection data. Please try again.');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleItemStatusChange = (itemId: string, status: ItemStatus, notes?: string, photoUrl?: string) => {\r\n    setItems(prevItems => {\r\n      const newItems = new Map(prevItems);\r\n      const item = newItems.get(itemId);\r\n      if (item) {\r\n        newItems.set(itemId, { ...item, status, notes, photoUrl });\r\n      }\r\n      return newItems;\r\n    });\r\n  };\r\n\r\n  const handleOfficerItemChange = (index: number, checked: boolean, value?: string | number) => {\r\n    setOfficerItems(prev => {\r\n      const newItems = [...prev];\r\n      newItems[index] = { ...newItems[index], checked, value };\r\n      \r\n      // Save to localStorage for next time\r\n      const newValues = { ...lastOfficerValues };\r\n      newValues[newItems[index].id] = value || '';\r\n      setLastOfficerValues(newValues);\r\n      \r\n      return newItems;\r\n    });\r\n  };\r\n\r\n  const handleCheckAllOfficer = () => {\r\n    setOfficerItems(prev => prev.map(item => {\r\n      // Auto-fill with sensible default values for specific fields\r\n      let defaultValue: string | number = item.value || '';\r\n      \r\n      // If field is empty and required, set appropriate defaults\r\n      if (!item.value || item.value === '') {\r\n        switch (item.id) {\r\n          case 'psi_front':\r\n          case 'psi_rear':\r\n            defaultValue = 115; // Typical Freightliner rescue truck tire PSI\r\n            break;\r\n          case 'brake_psi':\r\n            defaultValue = 120; // Typical brake PSI\r\n            break;\r\n          case 'm_cylinder_psi':\r\n            defaultValue = 1800; // Mid-range M Cylinder PSI (1000-2000)\r\n            break;\r\n          case 'fuel_percent':\r\n            defaultValue = 100; // Full tank\r\n            break;\r\n          case 'def_percent':\r\n            defaultValue = 100; // Full DEF\r\n            break;\r\n          default:\r\n            if (item.required && item.inputType !== 'checkbox') {\r\n              defaultValue = 'N/A';\r\n            }\r\n            break;\r\n        }\r\n      }\r\n      \r\n      return {\r\n        ...item,\r\n        checked: true,\r\n        value: defaultValue\r\n      };\r\n    }));\r\n  };\r\n\r\n  const handleCheckAllCompartment = () => {\r\n    if (!currentCompartment) return;\r\n    \r\n    setItems(prevItems => {\r\n      const newItems = new Map(prevItems);\r\n      currentCompartment.items.forEach(item => {\r\n        const itemName = typeof item === 'string' ? item : item.name;\r\n        const itemId = `${currentCompartment.id}:${itemName}`;\r\n        const existingItem = newItems.get(itemId);\r\n        if (existingItem) {\r\n          newItems.set(itemId, { ...existingItem, status: 'present' });\r\n        }\r\n      });\r\n      return newItems;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!user || !checklist) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Collect all defects\r\n      const defects: Array<{\r\n        compartment: string;\r\n        item: string;\r\n        status: 'missing' | 'damaged';\r\n        notes: string;\r\n        photoUrl?: string;\r\n      }> = [];\r\n\r\n      items.forEach((item) => {\r\n        if (item.status !== 'present') {\r\n          const compartment = checklist.compartments.find(\r\n            c => c.items.some(i => (typeof i === 'string' ? i : i.name) === item.name)\r\n          );\r\n          defects.push({\r\n            compartment: compartment?.title || 'Unknown',\r\n            item: item.name,\r\n            status: item.status,\r\n            notes: item.notes || '',\r\n            photoUrl: item.photoUrl,\r\n          });\r\n        }\r\n      });\r\n\r\n      // Submit inspection\r\n      await githubService.submitChecklist({\r\n        user,\r\n        apparatus: user.apparatus,\r\n        date: new Date().toISOString(),\r\n        items: Array.from(items.values()),\r\n        defects,\r\n        shift: user.shift,\r\n        unitNumber: user.unitNumber,\r\n        officerChecklist: officerItems,\r\n      });\r\n\r\n      // Submit vehicle change request if detected\r\n      if (detectedVehicleChange && expectedVehicleNo && user.unitNumber !== expectedVehicleNo) {\r\n        try {\r\n          await submitVehicleChangeRequest({\r\n            apparatus: user.apparatus,\r\n            oldVehicleNo: expectedVehicleNo,\r\n            newVehicleNo: user.unitNumber,\r\n            reportedBy: user.name,\r\n            notes: `Vehicle change detected during inspection on ${new Date().toLocaleDateString()}`,\r\n          });\r\n          console.log('Vehicle change request submitted successfully');\r\n        } catch (changeError) {\r\n          console.error('Failed to submit vehicle change request (non-critical):', changeError);\r\n        }\r\n      }\r\n\r\n      // Send notification after successful submission\r\n      try {\r\n        const totalItems = items.size;\r\n        const completedItems = Array.from(items.values()).filter(item => item.status === 'present').length;\r\n        \r\n        // Determine checklist type from apparatus\r\n        let checklistType = 'rescue';\r\n        if (user.apparatus.startsWith('Engine')) {\r\n          checklistType = 'engine';\r\n        } else if (user.apparatus.startsWith('Ladder')) {\r\n          checklistType = 'ladder';\r\n        } else if (user.apparatus === 'Rope Inventory') {\r\n          checklistType = 'rope';\r\n        }\r\n        \r\n        // Map defects to notification format with severity\r\n        const notificationDefects = defects.map(defect => ({\r\n          item: defect.item,\r\n          category: defect.compartment,\r\n          severity: defect.status === 'missing' ? ('critical' as const) : ('high' as const)\r\n        }));\r\n        \r\n        await githubService.sendNotification({\r\n          apparatus: user.apparatus,\r\n          operator: user.name,\r\n          checklistType,\r\n          totalItems,\r\n          completedItems,\r\n          defects: notificationDefects,\r\n          githubIssueUrl: undefined // Issue URL not available from submitChecklist\r\n        });\r\n        \r\n        console.log('Notification queued/sent successfully');\r\n      } catch (notifyError) {\r\n        // Log but don't fail the entire submission if notification fails\r\n        console.error('Failed to send notification (non-critical):', notifyError);\r\n      }\r\n\r\n      // Auto-create supply tasks for defects (non-blocking)\r\n      if (defects.length > 0) {\r\n        try {\r\n          const tasks = defects.map(defect => ({\r\n            apparatus: user.apparatus,\r\n            compartment: defect.compartment,\r\n            item: defect.item,\r\n            deficiencyType: defect.status,\r\n            createdBy: user.name,\r\n            notes: defect.notes || undefined,\r\n          }));\r\n\r\n          await createTasks(tasks);\r\n          console.log(`Successfully created ${tasks.length} supply task(s)`);\r\n        } catch (taskError) {\r\n          // Log but don't fail the entire submission if task creation fails\r\n          console.error('Failed to create supply tasks (non-critical):', taskError);\r\n        }\r\n      }\r\n\r\n      // Clear session and show success modal\r\n      sessionStorage.removeItem('user');\r\n      setSubmissionDefectCount(defects.length);\r\n      setShowSuccessModal(true);\r\n    } catch (error) {\r\n      console.error('Error submitting inspection:', error);\r\n      \r\n      // Show user-friendly error message\r\n      let errorMessage = 'Error submitting inspection. Please try again.';\r\n      if (error instanceof Error) {\r\n        if (error.message.includes('Failed to fetch')) {\r\n          errorMessage = 'No internet connection. Please check your connection and try again.';\r\n        } else if (error.message.includes('defect submissions failed')) {\r\n          errorMessage = 'Some defects failed to submit. Please check your connection and try again. Partial data may have been recorded.';\r\n        }\r\n      }\r\n      alert(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleSendEmail = async () => {\r\n    if (!userEmail || !userEmail.includes('@')) {\r\n      alert('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    setIsSendingEmail(true);\r\n    try {\r\n      // Create a summary of the inspection for email\r\n      const emailSubject = `MBFD Inspection Summary - ${user?.apparatus} - ${new Date().toLocaleDateString()}`;\r\n      \r\n      // Format text body\r\n      const textBody = `\r\nMBFD Inspection Summary\r\n\r\nApparatus: ${user?.apparatus}\r\nOperator: ${user?.name} (${user?.rank})\r\nShift: ${user?.shift}\r\nUnit Number: ${user?.unitNumber}\r\nDate: ${new Date().toLocaleString()}\r\nDefects Found: ${submissionDefectCount}\r\n\r\n${officerItems.length > 0 ? `\r\nOfficer Checklist:\r\n${officerItems.map(item => `- ${item.name}: ${item.checked ? '‚úì' : '‚úó'} ${item.value ? `(${item.value})` : ''}`).join('\\n')}`\r\n : ''}\r\n\r\nThis inspection has been recorded successfully.\r\n${submissionDefectCount > 0 ? '\\nIssues have been logged and will be reviewed by maintenance.' : '\\nNo issues were found during this inspection.'}\r\n\r\n---\r\nGenerated by MBFD Checkout System\r\n      `.trim();\r\n\r\n      // Format HTML body\r\n      const htmlBody = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <style>\r\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n    .header { background-color: #1e40af; color: white; padding: 20px; }\r\n    .content { padding: 20px; }\r\n    .info-grid { display: grid; grid-template-columns: 150px 1fr; gap: 10px; margin: 20px 0; }\r\n    .label { font-weight: bold; color: #555; }\r\n    .value { color: #333; }\r\n    .checklist { background-color: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0; }\r\n    .footer { background-color: #f9fafb; padding: 15px; text-align: center; color: #666; font-size: 12px; }\r\n    .badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-weight: bold; }\r\n    .badge-success { background-color: #10b981; color: white; }\r\n    .badge-warning { background-color: #f59e0b; color: white; }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"header\">\r\n    <h1 style=\"margin: 0;\">MBFD Inspection Summary</h1>\r\n  </div>\r\n  <div class=\"content\">\r\n    <div class=\"info-grid\">\r\n      <div class=\"label\">Apparatus:</div>\r\n      <div class=\"value\">${user?.apparatus}</div>\r\n      <div class=\"label\">Operator:</div>\r\n      <div class=\"value\">${user?.name} (${user?.rank})</div>\r\n      <div class=\"label\">Shift:</div>\r\n      <div class=\"value\">${user?.shift}</div>\r\n      <div class=\"label\">Unit Number:</div>\r\n      <div class=\"value\">${user?.unitNumber}</div>\r\n      <div class=\"label\">Date:</div>\r\n      <div class=\"value\">${new Date().toLocaleString()}</div>\r\n      <div class=\"label\">Defects Found:</div>\r\n      <div class=\"value\"><span class=\"badge ${submissionDefectCount === 0 ? 'badge-success' : 'badge-warning'}\">${submissionDefectCount}</span></div>\r\n    </div>\r\n    ${officerItems.length > 0 ? `\r\n    <div class=\"checklist\">\r\n      <h3 style=\"margin-top: 0;\">Officer Checklist</h3>\r\n      <ul>`\r\n        + officerItems.map(item => `<li><strong>${item.name}:</strong> ${item.checked ? '‚úì' : '‚úó'} ${item.value ? `<em>(${item.value})</em>` : ''}</li>`).join('')\r\n        + `</ul>\r\n    </div>\r\n    ` : ''}\r\n    <p style=\"margin-top: 20px;\">\r\n      ${submissionDefectCount > 0 \r\n        ? 'Issues have been logged and will be reviewed by maintenance.' \r\n        : 'No issues were found during this inspection. All equipment is operational.'}\r\n    </p>\r\n  </div>\r\n  <div class=\"footer\">\r\n    Generated by MBFD Checkout System\r\n  </div>\r\n</body>\r\n</html>\r\n      `.trim();\r\n\r\n      // Send via Gmail API through the worker\r\n      const response = await fetch(`${WORKER_URL}/api/send-email`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          to: userEmail,\r\n          subject: emailSubject,\r\n          body: textBody,\r\n          htmlBody: htmlBody,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({ error: 'Failed to send email' }));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      alert('‚úÖ Inspection summary sent to your email!');\r\n      setUserEmail('');\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      alert(`Failed to send email: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setIsSendingEmail(false);\r\n    }\r\n  };\r\n\r\n  const handleSuccessModalClose = () => {\r\n    setShowSuccessModal(false);\r\n    navigate('/');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-4\" />\r\n          <p className=\"text-gray-600 font-semibold\">Loading inspection checklist...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user || !checklist) {\r\n    return null;\r\n  }\r\n\r\n  // Calculate total steps (officer checklist + all compartments)\r\n  const hasOfficerChecklist = officerItems.length > 0;\r\n  const totalSteps = (hasOfficerChecklist ? 1 : 0) + checklist.compartments.length;\r\n  \r\n  // Determine if we're on officer checklist step\r\n  const isOfficerStep = hasOfficerChecklist && currentStep === 0;\r\n  const compartmentIndex = hasOfficerChecklist ? currentStep - 1 : currentStep;\r\n  const currentCompartment = !isOfficerStep ? checklist.compartments[compartmentIndex] : null;\r\n  \r\n  const isLastStep = currentStep === totalSteps - 1;\r\n  \r\n  // Check if current step is complete\r\n  const canProceed = isOfficerStep \r\n    ? officerItems.every(item => {\r\n        if (item.inputType === 'checkbox') return item.checked;\r\n        if (item.required) return item.checked && item.value && item.value.toString().trim() !== '';\r\n        return item.checked || (item.value && item.value.toString().trim() !== '');\r\n      })\r\n    : currentCompartment?.items.every(item => {\r\n        const itemName = typeof item === 'string' ? item : item.name;\r\n        const itemId = `${currentCompartment.id}:${itemName}`;\r\n        const checkedItem = items.get(itemId);\r\n        return checkedItem?.status !== undefined;\r\n      });\r\n\r\n  // Get today's schedule\r\n  const today = new Date().toLocaleDateString('en-US', { weekday: 'long' });\r\n  const todaySchedule = checklist.dailySchedule?.find(s => s.day === today);\r\n\r\n  // Determine container width based on device\r\n  const containerClass = device.isDesktop \r\n    ? 'max-w-7xl mx-auto' \r\n    : device.isTablet \r\n    ? 'max-w-4xl px-4' \r\n    : 'max-w-2xl px-4';\r\n\r\n  // Grid columns based on device\r\n  const gridClass = device.isDesktop \r\n    ? 'grid grid-cols-2 lg:grid-cols-3 gap-4' \r\n    : 'space-y-3';\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 pb-24\">\r\n      {/* Header */}\r\n      <div className=\"bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800 text-white sticky top-0 z-10 shadow-2xl pt-safe-top\">\r\n        <div className={`${containerClass} mx-auto ${device.isDesktop ? 'px-6' : 'px-4'} py-4`}>\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">{user.apparatus}</h1>\r\n              <p className=\"text-sm text-blue-100\">\r\n                {user.name} ‚Ä¢ {user.rank}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs text-blue-200\">Shift {user.shift}</p>\r\n              <p className=\"text-sm font-semibold\">Unit {user.unitNumber}</p>\r\n              {device.isDesktop && (\r\n                <p className=\"text-xs text-blue-300 mt-1\">üñ•Ô∏è Desktop Mode</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Progress Bar */}\r\n          <div className=\"flex items-center gap-1.5\">\r\n            {Array.from({ length: totalSteps }).map((_, idx) => (\r\n              <div\r\n                key={idx}\r\n                className={`h-2 flex-1 rounded-full transition-all duration-300 ${\r\n                  idx < currentStep\r\n                    ? 'bg-green-400'\r\n                    : idx === currentStep\r\n                    ? 'bg-white'\r\n                    : 'bg-blue-600'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n          <p className=\"text-xs text-blue-100 mt-2 text-center font-medium\">\r\n            Step {currentStep + 1} of {totalSteps}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Daily Schedule Banner */}\r\n      {todaySchedule && todaySchedule.tasks.length > 0 && todaySchedule.tasks[0] !== 'None' && (\r\n        <div className={`${containerClass} mx-auto ${device.isDesktop ? 'px-6' : 'px-4'} mt-4`}>\r\n          <div className=\"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-400 rounded-2xl p-4 shadow-md\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <Calendar className=\"w-6 h-6 text-amber-700 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <h3 className=\"font-bold text-amber-900 mb-1\">Today's Schedule - {today}</h3>\r\n                <ul className=\"space-y-1\">\r\n                  {todaySchedule.tasks.map((task, idx) => (\r\n                    <li key={idx} className=\"text-sm text-amber-800 font-medium\">‚Ä¢ {task}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Content */}\r\n      <div className={`${containerClass} mx-auto ${device.isDesktop ? 'px-6' : 'px-4'} py-6`}>\r\n        <Card className={`shadow-2xl ${device.isDesktop ? 'rounded-xl' : 'rounded-2xl'}`}>\r\n          <CardHeader className=\"bg-gradient-to-r from-gray-50 to-slate-50 border-b-2 border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                {isOfficerStep ? (\r\n                  <Shield className=\"w-8 h-8 text-blue-700\" />\r\n                ) : (\r\n                  <Gauge className=\"w-8 h-8 text-red-600\" />\r\n                )}\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-gray-900\">\r\n                    {isOfficerStep ? 'Officer Checklist' : currentCompartment?.title}\r\n                  </h2>\r\n                  <p className=\"text-sm text-gray-600 font-medium\">\r\n                    {isOfficerStep \r\n                      ? 'Complete all officer-specific checks'\r\n                      : 'Check all equipment in this compartment'\r\n                    }\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Check All Button */}\r\n              <Button\r\n                onClick={isOfficerStep ? handleCheckAllOfficer : handleCheckAllCompartment}\r\n                variant=\"secondary\"\r\n                className=\"flex items-center gap-2 h-10 px-4 text-sm font-bold bg-blue-100 hover:bg-blue-200 text-blue-800\"\r\n              >\r\n                <CheckCheck className=\"w-5 h-5\" />\r\n                {device.isMobile ? 'All OK' : 'Check All'}\r\n              </Button>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className={device.isDesktop ? \"p-6\" : \"p-4\"}>\r\n            {isOfficerStep ? (\r\n              <div className={gridClass}>\r\n                {officerItems.map((item, idx) => (\r\n                  <OfficerChecklistField\r\n                    key={item.id}\r\n                    item={item}\r\n                    index={idx}\r\n                    onChange={handleOfficerItemChange}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className={gridClass}>\r\n                {currentCompartment?.items.map((item) => {\r\n                  const itemName = typeof item === 'string' ? item : item.name;\r\n                  const itemId = `${currentCompartment.id}:${itemName}`;\r\n                  const checkedItem = items.get(itemId);\r\n                  const defectKey = `${currentCompartment.title}:${itemName}`;\r\n                  const hasExistingDefect = existingDefects.has(defectKey);\r\n                  const itemData = typeof item === 'object' ? item : { name: item, inputType: 'checkbox' as const };\r\n\r\n                  return (\r\n                    <InspectionCard\r\n                      key={itemId}\r\n                      item={itemData}\r\n                      compartmentId={currentCompartment.id}\r\n                      status={checkedItem?.status || 'present'}\r\n                      hasExistingDefect={hasExistingDefect}\r\n                      onStatusChange={(status, notes, photoUrl) =>\r\n                        handleItemStatusChange(itemId, status, notes, photoUrl)\r\n                      }\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Navigation Footer */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-300 p-4 shadow-2xl pb-safe-bottom\">\r\n        <div className={`${containerClass} mx-auto ${device.isDesktop ? 'px-6' : ''} flex gap-3`}>\r\n          {currentStep > 0 && (\r\n            <Button\r\n              onClick={() => setCurrentStep(currentStep - 1)}\r\n              variant=\"secondary\"\r\n              className=\"flex items-center gap-2 h-14 px-6 rounded-xl font-bold bg-gray-100 hover:bg-gray-200 text-gray-800\"\r\n            >\r\n              <ChevronLeft className=\"w-5 h-5\" />\r\n              Previous\r\n            </Button>\r\n          )}\r\n\r\n          <div className=\"flex-1\" />\r\n\r\n          {!isLastStep ? (\r\n            <Button\r\n              onClick={() => setCurrentStep(currentStep + 1)}\r\n              disabled={!canProceed}\r\n              className=\"flex items-center gap-2 h-14 px-8 rounded-xl font-bold shadow-lg bg-gradient-to-r from-blue-700 to-blue-800 hover:from-blue-800 hover:to-blue-900 disabled:from-gray-400 disabled:to-gray-500\"\r\n            >\r\n              Next\r\n              <ChevronRight className=\"w-5 h-5\" />\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              onClick={handleSubmit}\r\n              disabled={!canProceed || isSubmitting}\r\n              className=\"flex items-center gap-2 h-14 px-8 rounded-xl font-bold shadow-lg bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500\"\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent\" />\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <CheckCircle className=\"w-6 h-6\" />\r\n                  Complete Inspection\r\n                </>\r\n              )}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Success Modal */}\r\n      <Modal\r\n        isOpen={showSuccessModal}\r\n        onClose={handleSuccessModalClose}\r\n        title=\"Inspection Complete!\"\r\n      >\r\n        <div className=\"text-center space-y-4\">\r\n          <div className=\"flex justify-center\">\r\n            <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center\">\r\n              <CheckCircle className=\"w-12 h-12 text-green-600\" />\r\n            </div>\r\n          </div>\r\n          \r\n          <div>\r\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n              ‚úÖ Inspection Submitted Successfully!\r\n            </h3>\r\n            <p className=\"text-gray-700 font-medium\">\r\n              Your {user?.apparatus} inspection has been recorded.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 rounded-xl p-4 border-2 border-gray-200\">\r\n            <p className=\"text-sm text-gray-800 font-semibold\">\r\n              <strong>Defects Reported:</strong> {submissionDefectCount}\r\n            </p>\r\n            {submissionDefectCount > 0 && (\r\n              <p className=\"text-xs text-gray-600 mt-1\">\r\n                Issues have been logged and will be reviewed by maintenance.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Email Section */}\r\n          <div className=\"bg-blue-50 rounded-xl p-4 border-2 border-blue-200\">\r\n            <p className=\"text-sm font-bold text-blue-900 mb-3\">\r\n              üìß Get a copy of this inspection via email\r\n            </p>\r\n            <div className=\"space-y-2\">\r\n              <input\r\n                type=\"email\"\r\n                value={userEmail}\r\n                onChange={(e) => setUserEmail(e.target.value)}\r\n                placeholder=\"Enter your email address\"\r\n                className=\"w-full px-4 py-3 rounded-xl border-2 border-blue-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-600 outline-none transition-all text-base\"\r\n                disabled={isSendingEmail}\r\n              />\r\n              <Button\r\n                onClick={handleSendEmail}\r\n                disabled={isSendingEmail || !userEmail}\r\n                variant=\"secondary\"\r\n                className=\"w-full h-10 text-sm font-bold rounded-xl bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-400\"\r\n              >\r\n                {isSendingEmail ? 'Sending...' : 'Send Summary'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSuccessModalClose}\r\n            className=\"w-full h-12 text-base font-bold rounded-xl bg-gradient-to-r from-blue-700 to-blue-800 hover:from-blue-800 hover:to-blue-900\"\r\n          >\r\n            Return to Home\r\n          </Button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Officer Checklist Field Component\r\ninterface OfficerChecklistFieldProps {\r\n  item: OfficerChecklistItem;\r\n  index: number;\r\n  onChange: (index: number, checked: boolean, value?: string | number) => void;\r\n}\r\n\r\nconst OfficerChecklistField: React.FC<OfficerChecklistFieldProps> = ({ item, index, onChange }) => {\r\n  const { history, addToHistory } = useFieldHistory(item.id);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n\r\n  const handleChange = (checked: boolean, value?: string | number) => {\r\n    onChange(index, checked, value);\r\n    if (value && typeof value === 'string') {\r\n      addToHistory(value);\r\n    }\r\n  };\r\n\r\n  if (item.inputType === 'checkbox') {\r\n    return (\r\n      <div className=\"flex items-center gap-3 p-4 rounded-xl bg-white border-2 border-gray-300 transition-all hover:border-blue-400 shadow-sm\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={item.checked}\r\n          onChange={(e) => handleChange(e.target.checked)}\r\n          className=\"w-10 h-10 rounded-lg border-2 border-gray-400 text-blue-600 focus:ring-4 focus:ring-blue-400 cursor-pointer\"\r\n        />\r\n        <label className=\"flex-1 font-semibold text-gray-900 cursor-pointer\">\r\n          {item.name}\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 rounded-xl bg-white border-2 border-gray-300 space-y-2 shadow-sm\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={item.checked}\r\n          onChange={() => handleChange(item.checked, item.value)}\r\n          className=\"w-10 h-10 rounded border-2 border-gray-400 text-blue-600 cursor-pointer\"\r\n        />\r\n        <label className=\"font-semibold text-gray-900 text-sm\">\r\n          {item.name}\r\n          {item.required && <span className=\"text-red-600 ml-1\">*</span>}\r\n        </label>\r\n      </div>\r\n      <div className=\"relative\">\r\n        <input\r\n          type={item.inputType === 'number' || item.inputType === 'percentage' ? 'number' : 'text'}\r\n          value={item.value || ''}\r\n          onChange={(e) => handleChange(item.checked, item.inputType === 'number' ? parseFloat(e.target.value) || '' : e.target.value)}\r\n          onFocus={() => setShowSuggestions(true)}\r\n          onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\r\n          placeholder={item.inputType === 'percentage' ? 'Enter %' : item.inputType === 'number' ? 'Enter number' : 'Enter value'}\r\n          className=\"w-full px-3 py-3 text-base rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900 font-medium\"\r\n        />\r\n        {showSuggestions && history.length > 0 && item.inputType === 'text' && (\r\n          <div className=\"absolute z-10 w-full mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-xl max-h-40 overflow-y-auto\">\r\n            {history.map((val, idx) => (\r\n              <button\r\n                key={idx}\r\n                onClick={() => {\r\n                  handleChange(true, val);\r\n                  setShowSuggestions(false);\r\n                }}\r\n                className=\"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 transition-colors text-gray-900 font-medium\"\r\n              >\r\n                {val}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":["__iconNode","Camera","createLucideIcon","CheckCheck","ChevronLeft","ChevronRight","Gauge","Shield","Wrench","InspectionCard","item","status","hasExistingDefect","onStatusChange","compartmentId","showNotesModal","setShowNotesModal","useState","modalType","setModalType","notes","setNotes","showDefectStatusModal","setShowDefectStatusModal","radioNumber","setRadioNumber","selectedFile","setSelectedFile","previewUrl","setPreviewUrl","isUploading","setIsUploading","uploadError","setUploadError","uploadedPhotoUrl","setUploadedPhotoUrl","itemName","expectedQuantity","itemNote","isRadioItem","handleStatusClick","newStatus","handleDefectStatusChoice","choice","handleFileSelect","event","file","maxSize","reader","e","handleRemovePhoto","uploadPhoto","formData","response","WORKER_URL","error","result","errorMessage","handleSubmitNotes","photoUrl","handleCancel","jsxs","Fragment","cn","jsx","Check","X","AlertTriangle","Modal","Button","WrenchIcon","Upload","useDeviceDetection","deviceInfo","setDeviceInfo","width","height","useEffect","handleResize","useLocalStorage","key","initialValue","readValue","storedValue","setStoredValue","setValue","value","valueToStore","useFieldHistory","fieldKey","maxHistory","history","setHistory","prev","filtered","InspectionWizard","navigate","useNavigate","device","user","setUser","checklist","setChecklist","currentStep","setCurrentStep","items","setItems","existingDefects","setExistingDefects","officerItems","setOfficerItems","isLoading","setIsLoading","isSubmitting","setIsSubmitting","showSuccessModal","setShowSuccessModal","submissionDefectCount","setSubmissionDefectCount","userEmail","setUserEmail","isSendingEmail","setIsSendingEmail","statuses","getVehicleNumber","useApparatusStatus","detectedVehicleChange","setDetectedVehicleChange","expectedVehicleNo","setExpectedVehicleNo","lastOfficerValues","setLastOfficerValues","userData","parsedUser","loadChecklistData","vehicleNo","data","FORMS_MANAGEMENT_ENABLED","res","checklistFile","itemsMap","compartment","itemId","defects","githubService","handleItemStatusChange","prevItems","newItems","handleOfficerItemChange","index","checked","newValues","handleCheckAllOfficer","defaultValue","handleCheckAllCompartment","currentCompartment","existingItem","handleSubmit","c","i","submitVehicleChangeRequest","changeError","totalItems","completedItems","checklistType","notificationDefects","defect","notifyError","tasks","createTasks","taskError","handleSendEmail","emailSubject","textBody","htmlBody","errorData","handleSuccessModalClose","hasOfficerChecklist","totalSteps","isOfficerStep","compartmentIndex","isLastStep","canProceed","today","todaySchedule","containerClass","gridClass","_","idx","Calendar","task","Card","CardHeader","CardContent","OfficerChecklistField","checkedItem","defectKey","itemData","CheckCircle","onChange","addToHistory","showSuggestions","setShowSuggestions","handleChange","val"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}